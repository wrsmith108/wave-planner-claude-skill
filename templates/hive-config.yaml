# Hive Mind Configuration
# Generated by wave-planner skill
# Project: {{project_name}}
# Wave: {{wave_number}} - {{wave_name}}

name: "{{project_name}} Wave {{wave_number}}: {{wave_name}}"
description: |
  {{wave_description}}

  Issues: {{issue_identifiers}}
  Token Estimate: ~{{token_estimate}}K

# ============================================================================
# Resource Constraints
# ============================================================================

resources:
  # Maximum concurrent agents
  max_agents: {{max_agents}}

  # Resource profile: laptop | workstation | server
  profile: {{resource_profile}}

  # Token budget for this wave
  token_budget: {{token_budget}}

# ============================================================================
# Agent Configuration
# ============================================================================

agents:
{{#each agents}}
  - type: {{this.type}}
    role: {{this.role}}
    issues:
{{#each this.issues}}
      - {{this}}
{{/each}}
    capabilities:
      - code_generation
      - test_writing
      - code_review
    tools:
      - Read
      - Write
      - Edit
      - Bash
      - Grep
      - Glob
      - Task
{{/each}}

# ============================================================================
# Quality Gates
# ============================================================================

quality:
  # Require tests for all changes
  require_tests: true

  # TDD workflow: red-green-refactor
  tdd_workflow: red-green-refactor

  # Run governance review after each commit
  governance_review: after_each_commit
  governance_command: npm run audit:standards

  # Minimum coverage threshold for new code
  coverage_threshold: {{coverage_threshold}}

  # Block on critical governance findings
  block_on_critical: true

  # Create sub-issues for findings
  create_sub_issues_on_findings: true

# ============================================================================
# Workflow Configuration
# ============================================================================

workflow:
  # Issue execution order
  order:
{{#each issue_order}}
    - {{this}}
{{/each}}

  # Allow parallel execution within wave
  parallel: {{parallelizable}}

  # Checkpoint interval (minutes)
  checkpoint_interval: 15

  # Maximum execution time (minutes)
  timeout_minutes: {{timeout_minutes}}

  # Pre-execution checks
  pre_checks:
    - typecheck
    - lint

  # Post-execution checks
  post_checks:
    - test
    - coverage
    - governance

# ============================================================================
# Memory Coordination
# ============================================================================

memory:
  # Shared context keys
  shared_context:
    - architecture_decisions
    - implementation_patterns
{{#if previous_wave}}
    - wave_{{previous_wave}}_outputs
{{/if}}

  # Keys to persist for future waves
  persist:
    - implementation_notes
    - test_results
    - code_review_findings

  # Memory namespace
  namespace: "{{project_slug}}/wave-{{wave_number}}"

# ============================================================================
# Dependencies
# ============================================================================

dependencies:
  # Wave dependencies (must complete before this wave)
  waves:
{{#each wave_dependencies}}
    - {{this}}
{{/each}}

  # Issue-level dependencies
  issues:
{{#each issue_dependencies}}
    {{this.issue}}: [{{this.depends_on}}]
{{/each}}

# ============================================================================
# Notifications
# ============================================================================

notifications:
  # Notify on wave completion
  on_complete: true

  # Notify on critical failures
  on_failure: true

  # Progress updates interval (issues completed)
  progress_interval: 1

# ============================================================================
# TDD Test Cases
# ============================================================================

test_cases:
{{#each test_cases}}
  {{this.issue}}:
{{#each this.cases}}
    - "{{this}}"
{{/each}}
{{/each}}

# ============================================================================
# Acceptance Criteria
# ============================================================================

acceptance_criteria:
{{#each acceptance_criteria}}
  {{this.issue}}:
{{#each this.criteria}}
    - "{{this}}"
{{/each}}
{{/each}}

# ============================================================================
# Metadata
# ============================================================================

metadata:
  generated_at: "{{generated_at}}"
  generated_by: wave-planner
  version: "1.0.0"
  project_id: "{{project_id}}"
  wave_number: {{wave_number}}
  total_waves: {{total_waves}}
